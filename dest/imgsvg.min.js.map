{"version":3,"sources":["index.js"],"names":["window","addEventListener","XMLHttpRequest","imgsvg","document","querySelectorAll","forEach","call","img","url","req","src","test","this","removeAttribute","onreadystatechange","readyState","DONE","status","svg","responseXML","querySelector","parent","parentNode","importedNode","importNode","replaceChild","attributes","attr","nodeName","setAttribute","nodeValue","open","send"],"mappings":"CAAC,WAkEGA,OAAOC,iBAAiB,mBAbxB,WAEI,IAAKC,eAAgB,OAAO,EAC5B,IAAIC,EAASC,SAASC,iBAAiB,uBACpCC,QAAQC,KAAKJ,EAAQ,SAAUK,GAC9B,IApDgBC,EAAKD,EACrBE,EAmDIC,EAAMH,EAAIG,KAbtB,WAEI,MADY,kCACCC,KAAKC,QAaHN,KAAKI,KAChBH,EAAIM,gBAAgB,OAvDJL,EAwDDE,EAxDMH,EAwDDA,GAvDpBE,EAAM,IAAIR,gBACVa,mBAAqB,WACrB,GAAIL,EAAIM,aAAed,eAAee,KAAM,CACxC,GAAmB,MAAfP,EAAIQ,OAAgB,CACpB,IACIC,EADST,EAAIU,YACAC,cAAc,OAE/B,GAAIF,EAAK,CACL,IAAIG,EAASd,EAAIe,WACbC,EAAepB,SAASqB,WAAWN,GAAK,GAgB5C,OAfAG,EAAOI,aAAaF,EAAchB,UAM/BF,QAAQC,KAAKC,EAAImB,WAAY,SAAUC,GAEhB,QAAlBA,EAAKC,UAELL,EAAaM,aAAaF,EAAKC,SAASD,EAAKG,cAU7DvB,EAAIG,IAAMF,IAGlBC,EAAIsB,KAAK,MAAOvB,GAChBC,EAAIuB,YAzCZ","file":"imgsvg.min.js","sourcesContent":["(function () {\n    /**\n     * \n     * @param {*} url \n     * @param {*} cb \n     */\n    function loadSVGContent(url, img) {\n        var req = new XMLHttpRequest();\n        req.onreadystatechange = function () {\n            if (req.readyState === XMLHttpRequest.DONE) {\n                if (req.status === 200) {\n                    var xmlSvg = req.responseXML;\n                    var svg = xmlSvg.querySelector('svg');\n\n                    if (svg) {\n                        var parent = img.parentNode;\n                        var importedNode = document.importNode(svg, true);\n                        parent.replaceChild(importedNode, img);\n                        /*\n                        var imgClasses = img.className;\n                        parent.replaceChild(importedNode, img);\n                        importedNode.setAttribute('class', imgClasses);\n                        */\n                        [].forEach.call(img.attributes, function (attr) {\n\n                            if (attr.nodeName !== 'src') {\n                                \n                                importedNode.setAttribute(attr.nodeName,attr.nodeValue);\n                            }\n\n                        });\n\n                        return;\n                    }\n                }\n                // error or content is not a valid svg\n                // revert img src value\n                img.src = url;\n            }\n        };\n        req.open('GET', url);\n        req.send();\n\n    }\n\n    function isSVG() {\n        var regex = /([a-zA-Z0-9\\s_\\\\.\\-:])+(.svg)$/i;\n        return regex.test(this);\n    }\n\n    /**\n     * initializer function\n     */\n    function init() {\n        // do not continue if browser is not supported.\n        if (!XMLHttpRequest) return false;\n        var imgsvg = document.querySelectorAll('img[data-imgsvg]');\n        [].forEach.call(imgsvg, function (img) {\n            var src = img.src;\n\n            if (!isSVG.call(src)) return;\n            img.removeAttribute('src');\n            loadSVGContent(src, img)\n\n        })\n    }\n    window.addEventListener('DOMContentLoaded', init);\n}())\n\n\n"]}